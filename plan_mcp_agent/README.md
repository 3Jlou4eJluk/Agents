# ü§ñ PlanMCP Agent

**LangGraph-–∞–≥–µ–Ω—Ç —Å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –û–° –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π MCP** - Open Source –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Claude Desktop

[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![LangGraph](https://img.shields.io/badge/LangGraph-0.2+-green.svg)](https://github.com/langchain-ai/langgraph)

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#-–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- [–î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã](#-–¥–æ—Å—Ç—É–ø–Ω—ã–µ-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)
- [MCP —Å–µ—Ä–≤–µ—Ä—ã](#-mcp-—Å–µ—Ä–≤–µ—Ä—ã)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∞–Ω–∞–ª–æ–≥–∞–º–∏](#-—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ-—Å-–∞–Ω–∞–ª–æ–≥–∞–º–∏)

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üéØ **Plan-and-Execute –ø–∞—Ç—Ç–µ—Ä–Ω** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á –Ω–∞ —à–∞–≥–∏
- üìÅ **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –û–°** - –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏, shell –∫–æ–º–∞–Ω–¥–∞–º–∏, –ø–æ–∏—Å–∫–æ–º
- üîå **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ MCP** - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ª—é–±—ã–º MCP —Å–µ—Ä–≤–µ—Ä–∞–º –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- üîÑ **LangGraph workflow** - –ù–∞–¥–µ–∂–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ –ø–æ—Ç–æ–∫–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- üß† **–ú–Ω–æ–∂–µ—Å—Ç–≤–æ LLM** - Anthropic Claude, OpenAI, –∏ –¥—Ä—É–≥–∏–µ
- ‚ö° **Async/Await** - –ü–æ–ª–Ω–∞—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- üîç **ReAct –ø–∞—Ç—Ç–µ—Ä–Ω** - –£–º–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ reasoning
- üõ°Ô∏è **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–ª–∞–Ω–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      PlanMCP Agent                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ   Planner    ‚îÇ‚îÄ‚îÄ‚ñ∂‚îÇ   Executor   ‚îÇ‚îÄ‚îÄ‚ñ∂‚îÇ  Replanner   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ   ‚îÇ              ‚îÇ   ‚îÇ              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ –°–æ–∑–¥–∞–µ—Ç –ø–ª–∞–Ω ‚îÇ   ‚îÇ –í—ã–ø–æ–ª–Ω—è–µ—Ç    ‚îÇ   ‚îÇ –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è   ‚îÇ   ‚îÇ —à–∞–≥–∏ —Å       ‚îÇ   ‚îÇ –ø–ª–∞–Ω –ø–æ      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ   ‚îÇ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏‚îÇ   ‚îÇ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º  ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ         ‚îÇ                   ‚îÇ                   ‚îÇ          ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                             ‚ñº                              ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ              ‚îÇ   LangGraph State Machine    ‚îÇ             ‚îÇ
‚îÇ              ‚îÇ  (plan ‚Üí execute ‚Üí replan)   ‚îÇ             ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îÇ                      ‚îÇ              ‚îÇ                      ‚îÇ
‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ         ‚îÇ                   ‚îÇ  ‚îÇ                ‚îÇ        ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ    ‚îÇOS Tools  ‚îÇ      ‚îÇ  LLM (Claude,  ‚îÇ   ‚îÇMCP Client ‚îÇ  ‚îÇ
‚îÇ    ‚îÇ          ‚îÇ      ‚îÇ  OpenAI, etc)  ‚îÇ   ‚îÇ           ‚îÇ  ‚îÇ
‚îÇ    ‚îÇ‚Ä¢ Files   ‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ‚Ä¢ Custom   ‚îÇ  ‚îÇ
‚îÇ    ‚îÇ‚Ä¢ Shell   ‚îÇ                           ‚îÇ  Servers  ‚îÇ  ‚îÇ
‚îÇ    ‚îÇ‚Ä¢ Search  ‚îÇ                           ‚îÇ‚Ä¢ Tools    ‚îÇ  ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

1. **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - LLM –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ü–µ–ª—å –∏ —Å–æ–∑–¥–∞–µ—Ç –ø–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω
2. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** - –ö–∞–∂–¥—ã–π —à–∞–≥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ ReAct —Ü–∏–∫–ª —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
3. **–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞** - –ü–ª–∞–Ω –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
4. **–ò—Ç–µ—Ä–∞—Ü–∏—è** - –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–ª–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ uv (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd plan_mcp_agent

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
uv sync

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –¥–æ–±–∞–≤—å—Ç–µ API –∫–ª—é—á–∏
nano .env
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ pip

```bash
pip install langgraph langchain-anthropic langchain-openai \
    langchain-mcp-adapters python-dotenv rich
```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11 –∏–ª–∏ –≤—ã—à–µ
- API –∫–ª—é—á –æ—Ç Anthropic –∏–ª–∏ OpenAI
- (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) Node.js –¥–ª—è MCP —Å–µ—Ä–≤–µ—Ä–æ–≤

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1Ô∏è‚É£ –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (–±–µ–∑ MCP)

```python
import asyncio
from plan_mcp_agent.agent import PlanMCPAgent

async def main():
    # –°–æ–∑–¥–∞–µ–º –∞–≥–µ–Ω—Ç–∞
    async with PlanMCPAgent() as agent:
        # –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–¥–∞—á—É
        result = await agent.run(
            "–°–æ–∑–¥–∞–π Python —Å–∫—Ä–∏–ø—Ç hello.py, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–≤–æ–¥–∏—Ç Hello World, –∏ –∑–∞–ø—É—Å—Ç–∏ –µ–≥–æ"
        )

asyncio.run(main())
```

### 2Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å MCP —Å–µ—Ä–≤–µ—Ä–∞–º–∏

```python
import asyncio
from plan_mcp_agent.agent import PlanMCPAgent

async def main():
    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
    mcp_config = {
        "filesystem": {
            "command": "npx",
            "args": ["-y", "@modelcontextprotocol/server-filesystem", "/tmp"],
            "transport": "stdio"
        }
    }

    # –°–æ–∑–¥–∞–µ–º –∞–≥–µ–Ω—Ç–∞ —Å MCP
    async with PlanMCPAgent(mcp_config=mcp_config) as agent:
        result = await agent.run("–ü–æ–∫–∞–∂–∏ –≤—Å–µ —Ñ–∞–π–ª—ã –≤ /tmp")

asyncio.run(main())
```

### 3Ô∏è‚É£ CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
uv run python main.py

# –†–µ–∂–∏–º –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
uv run python main.py "–ù–∞–π–¥–∏ –≤—Å–µ Python —Ñ–∞–π–ª—ã –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏"

# –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
./scripts/run.sh "Search for AI news and summarize it"

# –ó–∞–ø—É—Å–∫ —Å —Ñ–∞–π–ª–æ–º –∑–∞–¥–∞—á–∏ (–¥–ª—è –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π)
./scripts/run.sh tasks/example_task.txt

# –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π —Ñ–∞–π–ª —Å –∑–∞–¥–∞–Ω–∏–µ–º
echo "–ö–∞–∫–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ —Å–µ–≥–æ–¥–Ω—è –≤ –º–∏—Ä–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π?" > tasks/my_task.txt
./scripts/run.sh tasks/my_task.txt

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–æ–≤
uv run python examples/basic_usage.py
uv run python examples/with_mcp.py
uv run python examples/full_mcp_config.py  # –° –ø–æ–ª–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π MCP
```

### 4Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
uv run python test_agent.py
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ: —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω API –∫–ª—é—á
ANTHROPIC_API_KEY=sk-ant-xxxxxxxxxxxxx
OPENAI_API_KEY=sk-xxxxxxxxxxxxx

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: LangSmith –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥–∞
LANGSMITH_API_KEY=lsv2_pt_xxxxxxxxxxxxx
LANGSMITH_PROJECT=plan-mcp-agent

# –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
DEFAULT_MODEL=anthropic:claude-3-5-sonnet-20241022
```

### MCP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (mcp_config.json)

–í –ø—Ä–æ–µ–∫—Ç–µ –≤–∫–ª—é—á–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º MCP —Å–µ—Ä–≤–µ—Ä–æ–≤:

```json
{
  "mcpServers": {
    "reddit": {
      "command": "uvx",
      "args": ["mcp-server-reddit"],
      "transport": "stdio"
    },
    "tavily-mcp": {
      "command": "npx",
      "args": ["tavily-mcp@0.1.2"],
      "env": {
        "TAVILY_API_KEY": "your-key-here"
      },
      "transport": "stdio"
    },
    "server-brave-search": {
      "command": "npx",
      "args": ["@modelcontextprotocol/server-brave-search", "-y"],
      "env": {
        "BRAVE_API_KEY": "your-key-here"
      },
      "transport": "stdio"
    },
    "firecrawl-mcp": {
      "command": "npx",
      "args": ["-y", "firecrawl-mcp"],
      "env": {
        "FIRECRAWL_API_KEY": "your-key-here"
      },
      "transport": "stdio"
    },
    "youtube-mcp": {
      "command": "npx",
      "args": ["youtube-mcp"],
      "transport": "stdio"
    },
    "playwright-mcp-server": {
      "command": "npx",
      "args": ["@executeautomation/playwright-mcp-server"],
      "transport": "stdio"
    },
    "desktop-commander": {
      "command": "npx",
      "args": ["@wonderwhy-er/desktop-commander@latest"],
      "transport": "stdio"
    }
  }
}
```

–§–∞–π–ª `mcp_config.json` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≥–æ—Ç–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤.

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```python
from plan_mcp_agent.agent import PlanMCPAgent
from plan_mcp_agent.mcp.client import load_mcp_config_from_file

# –ó–∞–≥—Ä—É–∑–∫–∞ MCP –∏–∑ —Ñ–∞–π–ª–∞
mcp_config = load_mcp_config_from_file("mcp_config.json")

# –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
agent = PlanMCPAgent(
    model="anthropic:claude-3-5-sonnet-20241022",  # –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏
    mcp_config=mcp_config,                          # MCP —Å–µ—Ä–≤–µ—Ä—ã
    max_iterations=20,                              # –ú–∞–∫—Å–∏–º—É–º –∏—Ç–µ—Ä–∞—Ü–∏–π
    enable_os_tools=True                            # –í–∫–ª—é—á–∏—Ç—å OS –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
)
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ê–Ω–∞–ª–∏–∑ —Ñ–∞–π–ª–æ–≤

```python
objective = """
–ù–∞–π–¥–∏ –≤—Å–µ Python —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ src,
–ø–æ—Å—á–∏—Ç–∞–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –≤ –∫–∞–∂–¥–æ–º,
–∏ —Å–æ–∑–¥–∞–π –æ—Ç—á–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown.
"""

async with PlanMCPAgent() as agent:
    result = await agent.run(objective)
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
1. –ê–≥–µ–Ω—Ç —Å–æ–∑–¥–∞—Å—Ç –ø–ª–∞–Ω –∏–∑ 3-4 —à–∞–≥–æ–≤
2. –í—ã–ø–æ–ª–Ω–∏—Ç –ø–æ–∏—Å–∫ Python —Ñ–∞–π–ª–æ–≤
3. –ü—Ä–æ—á–∏—Ç–∞–µ—Ç –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª –∏ –ø–æ—Å—á–∏—Ç–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏
4. –°–æ–∑–¥–∞—Å—Ç Markdown –æ—Ç—á–µ—Ç

### –ü—Ä–∏–º–µ—Ä 2: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞

```python
objective = """
1. –ü—Ä–æ—á–∏—Ç–∞–π —Ñ–∞–π–ª utils.py
2. –î–æ–±–∞–≤—å type hints –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º
3. –î–æ–±–∞–≤—å docstrings –≤ Google style
4. –°–æ—Ö—Ä–∞–Ω–∏ —É–ª—É—á—à–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
"""

async with PlanMCPAgent() as agent:
    result = await agent.run(objective)
```

### –ü—Ä–∏–º–µ—Ä 3: –†–∞–±–æ—Ç–∞ —Å Git —á–µ—Ä–µ–∑ MCP

```python
from plan_mcp_agent.mcp.client import load_mcp_config_from_file

mcp_config = load_mcp_config_from_file("examples/mcp_config.json")

async with PlanMCPAgent(mcp_config=mcp_config) as agent:
    result = await agent.run(
        "–ü–æ–∫–∞–∂–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –∫–æ–º–º–∏—Ç–æ–≤ –∏ —Å–æ–∑–¥–∞–π –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
    )
```

### –ü—Ä–∏–º–µ—Ä 4: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –∑–∞–¥–∞—á–∞

```python
objective = """
–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞:
1. –ù–∞–π–¥–∏ –≤—Å–µ Python –º–æ–¥—É–ª–∏
2. –ü–æ—Å—Ç—Ä–æ–π –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É –Ω–∏–º–∏
3. –ù–∞–π–¥–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
4. –°–æ–∑–¥–∞–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –≤ DOT —Ñ–æ—Ä–º–∞—Ç–µ
"""

async with PlanMCPAgent(max_iterations=30) as agent:
    result = await agent.run(objective)
```

---

## üõ†Ô∏è –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### OS Tools (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ)

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|-----------|----------|--------|
| `execute_shell_command` | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ shell –∫–æ–º–∞–Ω–¥ | `ls -la`, `git status` |
| `read_file` | –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (—Å –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º —Å—Ç—Ä–æ–∫) | –ß—Ç–µ–Ω–∏–µ –∫–æ–¥–∞, –∫–æ–Ω—Ñ–∏–≥–æ–≤ |
| `write_file` | –ó–∞–ø–∏—Å—å/–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª—ã | –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤, –æ—Ç—á–µ—Ç–æ–≤ |
| `list_directory` | –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ | –ü–æ–∏—Å–∫ —Å –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏ `*.py` |
| `search_files` | –ü–æ–∏—Å–∫ —Ç–µ–∫—Å—Ç–∞ –≤ —Ñ–∞–π–ª–∞—Ö | –ü–æ–∏—Å–∫ —Ñ—É–Ω–∫—Ü–∏–π, –∫–ª–∞—Å—Å–æ–≤ |

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

```python
# –ê–≥–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–µ—Ä–µ—Ç –Ω—É–∂–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
async with PlanMCPAgent() as agent:
    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç: list_directory, read_file, execute_shell_command
    await agent.run("–ù–∞–π–¥–∏ –≤—Å–µ TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ Python —Ñ–∞–π–ª–∞—Ö")

    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç: search_files, read_file
    await agent.run("–ù–∞–π–¥–∏ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –∏–º–µ–Ω–µ–º 'process' –≤ –ø—Ä–æ–µ–∫—Ç–µ")

    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç: write_file, execute_shell_command
    await agent.run("–°–æ–∑–¥–∞–π requirements.txt –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è")
```

---

## üîå MCP —Å–µ—Ä–≤–µ—Ä—ã

–ê–≥–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª—é–±—ã–µ MCP —Å–µ—Ä–≤–µ—Ä—ã. –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã

| –°–µ—Ä–≤–µ—Ä | –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ | –í–∫–ª—é—á–µ–Ω |
|--------|-------------|---------|
| `@modelcontextprotocol/server-filesystem` | –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ | ‚ùå |
| `@modelcontextprotocol/server-git` | Git –æ–ø–µ—Ä–∞—Ü–∏–∏ | ‚ùå |
| `@modelcontextprotocol/server-brave-search` | –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ Brave | ‚úÖ |
| `tavily-mcp` | –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ Tavily | ‚úÖ |
| `firecrawl-mcp` | Web scraping | ‚úÖ |
| `youtube-mcp` | YouTube –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | ‚úÖ |
| `mcp-server-reddit` | Reddit API | ‚úÖ |
| `playwright-mcp-server` | –ë—Ä–∞—É–∑–µ—Ä–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è | ‚úÖ |
| `desktop-commander` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—á–∏–º —Å—Ç–æ–ª–æ–º | ‚úÖ |
| `@anaisbetts/mcp-youtube` | YouTube –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ | ‚úÖ |
| `@brightdata/mcp` | Bright Data scraping | ‚úÖ |

–í—Å–µ —Å–µ—Ä–≤–µ—Ä—ã –ø—Ä–µ–¥–Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ `mcp_config.json`. –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å API –∫–ª—é—á–∞–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –∏—Ö –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ MCP —Å–µ—Ä–≤–µ—Ä–∞

```python
from mcp.server.fastmcp import FastMCP

# –°–æ–∑–¥–∞–µ–º —Å–µ—Ä–≤–µ—Ä
mcp = FastMCP("MyServer")

@mcp.tool()
def my_tool(param: str) -> str:
    """–û–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞."""
    return f"–†–µ–∑—É–ª—å—Ç–∞—Ç: {param}"

# –ó–∞–ø—É—Å–∫
if __name__ == "__main__":
    mcp.run(transport="stdio")
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [MCP Servers Directory](https://github.com/modelcontextprotocol/servers)

---

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
plan_mcp_agent/
‚îú‚îÄ‚îÄ üìÑ README.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ üìÑ main.py                # CLI —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ üìÑ test_agent.py          # –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ üìÑ pyproject.toml         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ üìÑ .env.example           # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ üìÑ mcp_config.json        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ üìÅ docs/                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ QUICKSTART.md         # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îÇ   ‚îú‚îÄ‚îÄ ARCHITECTURE.md       # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ DEEPSEEK.md           # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ DeepSeek
‚îÇ
‚îú‚îÄ‚îÄ üìÅ scripts/               # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ run.sh                # –°–∫—Ä–∏–ø—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ üìÅ plan_mcp_agent/        # –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞–∫–µ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ agent.py              # –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –∞–≥–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ graph.py              # LangGraph workflow
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ agents/            # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ planner.py        # –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ executor.py       # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å ReAct
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ replanner.py      # –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–ª–∞–Ω–æ–≤
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ mcp/               # MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ client.py         # MCP –∫–ª–∏–µ–Ω—Ç –º–µ–Ω–µ–¥–∂–µ—Ä
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ tools/             # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îî‚îÄ‚îÄ os_tools.py       # OS –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ
‚îî‚îÄ‚îÄ üìÅ examples/              # –ü—Ä–∏–º–µ—Ä—ã
    ‚îú‚îÄ‚îÄ basic_usage.py        # –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä
    ‚îú‚îÄ‚îÄ with_mcp.py           # –° MCP —Å–µ—Ä–≤–µ—Ä–∞–º–∏
    ‚îú‚îÄ‚îÄ full_mcp_config.py    # –° –ø–æ–ª–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π MCP
    ‚îî‚îÄ‚îÄ deepseek_usage.py     # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ DeepSeek
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

```python
from langchain_core.tools import tool
from plan_mcp_agent.agent import PlanMCPAgent

# –°–æ–∑–¥–∞–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
@tool
def calculate_fibonacci(n: int) -> int:
    """–í—ã—á–∏—Å–ª—è–µ—Ç n-–Ω–æ–µ —á–∏—Å–ª–æ –§–∏–±–æ–Ω–∞—á—á–∏."""
    if n <= 1:
        return n
    return calculate_fibonacci(n-1) + calculate_fibonacci(n-2)

# –î–æ–±–∞–≤–ª—è–µ–º –∫ –∞–≥–µ–Ω—Ç—É
async with PlanMCPAgent() as agent:
    agent.tools.append(calculate_fibonacci)
    result = await agent.run("–í—ã—á–∏—Å–ª–∏ 10-–µ —á–∏—Å–ª–æ –§–∏–±–æ–Ω–∞—á—á–∏")
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
uv sync --dev

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
uv run pytest

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
uv run pytest --cov=plan_mcp_agent
```

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —É–∑–ª–∞ –≤ –≥—Ä–∞—Ñ

```python
# –í graph.py
async def validation_node(self, state: AgentState) -> AgentState:
    """–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–ª–∞–Ω–∞ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º."""
    plan = state["plan"]
    # –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
    return state

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥—Ä–∞—Ñ
workflow.add_node("validation", self.validation_node)
workflow.add_edge("plan", "validation")
workflow.add_edge("validation", "execute")
```

#### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è Planner

```python
from plan_mcp_agent.agents.planner import PlannerAgent

class MyPlanner(PlannerAgent):
    async def create_plan(self, objective: str, context=None):
        # –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
        plan = await super().create_plan(objective, context)
        # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
        return plan
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∞–Ω–∞–ª–æ–≥–∞–º–∏

### vs Claude Desktop

| –§—É–Ω–∫—Ü–∏—è | PlanMCP Agent | Claude Desktop |
|---------|---------------|----------------|
| **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚úÖ –Ø–≤–Ω–æ–µ, –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–µ | ‚ùå –ù–µ—è–≤–Ω–æ–µ |
| **MCP Support** | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ |
| **OS Tools** | ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ | ‚úÖ –ß–µ—Ä–µ–∑ MCP |
| **Open Source** | ‚úÖ MIT License | ‚ùå –ó–∞–∫—Ä—ã—Ç—ã–π |
| **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è** | ‚úÖ –ü–æ–ª–Ω–∞—è | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è |
| **–í—ã–±–æ—Ä LLM** | ‚úÖ –õ—é–±–∞—è –º–æ–¥–µ–ª—å | ‚ùå –¢–æ–ª—å–∫–æ Claude |
| **Self-hosted** | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç |
| **API –¥–æ—Å—Ç—É–ø** | ‚úÖ Python API | ‚ùå –¢–æ–ª—å–∫–æ GUI |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å** | ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É |

### vs Simple ReAct Agent

| –ê—Å–ø–µ–∫—Ç | PlanMCP Agent | ReAct Agent |
|--------|---------------|-------------|
| **–°–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏** | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | ‚ö†Ô∏è –ú–æ–∂–µ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞—Ç—å—Å—è |
| **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** | ‚úÖ –í–∏–¥–µ–Ω –≤–µ—Å—å –ø–ª–∞–Ω | ‚ùå –®–∞–≥ –∑–∞ —à–∞–≥–æ–º |
| **–ü—Ä–æ—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏** | ‚ö†Ô∏è –ú–µ–¥–ª–µ–Ω–Ω–µ–µ | ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ |
| **–û—Ç–ª–∞–¥–∫–∞** | ‚úÖ –õ–µ–≥–∫–æ | ‚ö†Ô∏è –°–ª–æ–∂–Ω–µ–µ |
| **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** | ‚úÖ –ü–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è |

### vs LangChain Agent Executor

| –§—É–Ω–∫—Ü–∏—è | PlanMCP Agent | LangChain Agent |
|---------|---------------|-----------------|
| **Workflow** | ‚úÖ LangGraph | ‚ö†Ô∏è Chain-based |
| **State Management** | ‚úÖ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π | ‚ö†Ô∏è –ë–∞–∑–æ–≤—ã–π |
| **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ | ‚ùå –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å |
| **MCP** | ‚úÖ –ù–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | ‚ö†Ô∏è –ß–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–µ—Ä—ã |

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Plan-and-Execute

### –ü–æ—á–µ–º—É —è–≤–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ?

1. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –≤–∏–¥–∏—Ç–µ –≤–µ—Å—å –ø–ª–∞–Ω –∑–∞—Ä–∞–Ω–µ–µ
2. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —à–∞–≥–æ–≤
3. **–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º** - –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —à–∞–≥–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
4. **–û—Ç–ª–∞–¥–∫–∞** - –ª–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å, –≥–¥–µ –≤–æ–∑–Ω–∏–∫–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞
5. **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** - –ø–ª–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Plan-and-Execute?

‚úÖ **–•–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:**
- –ú–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã—Ö –∑–∞–¥–∞—á (>3 —à–∞–≥–æ–≤)
- –ó–∞–¥–∞—á —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –º–µ–∂–¥—É —à–∞–≥–∞–º–∏
- –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- –ó–∞–¥–∞—á —Ç—Ä–µ–±—É—é—â–∏—Ö –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

‚ö†Ô∏è **–ò–∑–±—ã—Ç–æ—á–Ω–æ –¥–ª—è:**
- –ü—Ä–æ—Å—Ç—ã—Ö –æ–¥–Ω–æ—à–∞–≥–æ–≤—ã—Ö –∑–∞–¥–∞—á
- –ó–∞–¥–∞—á —Ç—Ä–µ–±—É—é—â–∏—Ö –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
- –ß–∏—Å—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

## ü§ù Contributing

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è –ª—é–±—ã–µ —É–ª—É—á—à–µ–Ω–∏—è!

### –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è

- [ ] –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ OS –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- [ ] –ë–æ–ª—å—à–µ MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- [ ] Web UI / Streamlit –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞
- [ ] Human-in-the-loop –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- [ ] –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —à–∞–≥–æ–≤
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ LLM
- [ ] –ë–æ–ª—å—à–µ —Ç–µ—Å—Ç–æ–≤
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º

### –ö–∞–∫ –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–∏—Ç—å

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/amazing-feature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. Push –≤ branch (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. [LICENSE](LICENSE)

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ:

- **[LangGraph](https://github.com/langchain-ai/langgraph)** - State machine –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤
- **[LangChain](https://github.com/langchain-ai/langchain)** - –§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è LLM
- **[MCP](https://modelcontextprotocol.io/)** - Model Context Protocol –æ—Ç Anthropic
- **[Claude Desktop](https://claude.ai/desktop)** - –í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –¥–ª—è –¥–∏–∑–∞–π–Ω–∞

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [MCP Documentation](https://modelcontextprotocol.io/docs) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ MCP
- [LangGraph Tutorials](https://langchain-ai.github.io/langgraph/) - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ LangGraph
- [Plan-and-Execute Pattern](https://blog.langchain.com/planning-agents/) - –°—Ç–∞—Ç—å—è –æ –ø–∞—Ç—Ç–µ—Ä–Ω–µ
- [MCP Servers Directory](https://github.com/modelcontextprotocol/servers) - –ö–∞—Ç–∞–ª–æ–≥ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
- [FastMCP](https://github.com/jlowin/fastmcp) - –°–æ–∑–¥–∞–Ω–∏–µ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤

---

## üìß –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- –í–æ–ø—Ä–æ—Å—ã –∏ Issues: [GitHub Issues](https://github.com/your-repo/issues)
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –°–º. `docs/ARCHITECTURE.md` –∏ `docs/QUICKSTART.md`

---

<div align="center">

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –∏—Å–ø–æ–ª—å–∑—É—è LangGraph –∏ MCP**

‚≠ê –ü–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É, –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –±—ã–ª –ø–æ–ª–µ–∑–µ–Ω!

</div>
